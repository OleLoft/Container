Guide:
https://longhorn.io/docs/1.8.1/deploy/install/install-with-kubectl/


kubectl apply -f https://raw.githubusercontent.com/longhorn/longhorn/v1.8.1/deploy/longhorn.yaml


Check deployment:
kubectl get pods \
--namespace longhorn-system \
--watch


USER=<USERNAME_HERE>; PASSWORD=<PASSWORD_HERE>; echo "${USER}:$(openssl passwd -stdin -apr1 <<< ${PASSWORD})" >> auth
USER=olel; PASSWORD=olel; echo "${USER}:$(openssl passwd -stdin -apr1 <<< ${PASSWORD})" >> auth

kubectl -n longhorn-system create secret generic basic-auth --from-file=auth

Create longhorn-ingress.yml file

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: longhorn-ingress
  namespace: longhorn-system
  annotations:
    # type of authentication
    nginx.ingress.kubernetes.io/auth-type: basic
    # prevent the controller from redirecting (308) to HTTPS
    nginx.ingress.kubernetes.io/ssl-redirect: 'false'
    # name of the secret that contains the user/password definitions
    nginx.ingress.kubernetes.io/auth-secret: basic-auth
    # message to display with an appropriate context why the authentication is required
    nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required '
    # custom max body size for file uploading like backing image uploading
    nginx.ingress.kubernetes.io/proxy-body-size: 10000m
spec:
  ingressClassName: nginx
  rules:
  - http:
      paths:
      - pathType: Prefix
        path: "/"
        backend:
          service:
            name: longhorn-frontend
            port:
              number: 80
              

To get auth token
cat auth
It could look like this:
olel:$apr1$OPX5Ahit$apULysHi9t6IsNBHiTHiq


kubectl -n longhorn-system get svc
Get the frontend cluster-ip


kubectl -n longhorn-system get secret basic-auth -o yaml
apiVersion: v1
data:
  auth: b2xlbDokYXByMSRPUFg1QWhpdCRhcFVMeXNIaTl0NklzTkJIaVRIaXEuCg==
kind: Secret
metadata:
  creationTimestamp: "2025-04-11T11:32:48Z"
  name: basic-auth
  namespace: longhorn-system
  resourceVersion: "29625"
  uid: 704c6c86-9ab6-47f7-baeb-de9d47bb4892
type: Opaque


kubectl -n longhorn-system get svc
should be possible to access using the frontend IP in a browser

!Note - it seems to be running but I can't access it




              
